(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[202],{63:(e,t,r)=>{"use strict";var s=r(7260);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},804:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2619,23)),Promise.resolve().then(r.bind(r,5176)),Promise.resolve().then(r.bind(r,7567)),Promise.resolve().then(r.bind(r,5897)),Promise.resolve().then(r.bind(r,5894))},1120:(e,t,r)=>{"use strict";r.d(t,{T:()=>i});var s=r(5155),a=r(2115),n=r(4269);let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...a})});i.displayName="Textarea"},1647:(e,t,r)=>{"use strict";r.d(t,{E:()=>c});var s=r(5155);r(2115);var a=r(3101),n=r(4269);let i=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:t,variant:r,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)(i({variant:r}),t),...a})}},2033:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(4294).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2240:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(4294).A)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]])},4697:(e,t,r)=>{"use strict";r.d(t,{F:()=>c});var s=r(2115),a=r(9829),n=r(4269);let i="http://localhost:5000/api".replace("/api","")||"http://localhost:5000";function c(){let e=(0,s.useRef)(null),[t,r]=(0,s.useState)(!1),c=(0,s.useRef)(0),l=(0,s.useRef)(!1);return(0,s.useEffect)(()=>{let t=null,s=()=>{if(l.current||!(0,n.wR)())return;let o=localStorage.getItem("authToken");o&&(l.current=!0,e.current&&e.current.disconnect(),(t=(0,a.io)(i,{auth:{token:"Bearer ".concat(o)},reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,reconnectionDelayMax:5e3,transports:["websocket","polling"],timeout:1e4})).on("connect",()=>{r(!0),l.current=!1,c.current=0}),t.on("disconnect",e=>{r(!1),l.current=!1,"io client disconnect"!==e&&c.current<5&&(c.current++,setTimeout(s,1e3*c.current))}),t.on("connect_error",e=>{r(!1),l.current=!1}),e.current=t)};return s(),()=>{l.current=!1,e.current&&(e.current.connected&&e.current.close(),e.current=null),r(!1)}},[]),{socket:e.current,connected:t}}},5176:(e,t,r)=>{"use strict";r.d(t,{QuestionPageClientComponent:()=>q});var s=r(5155),a=r(2115),n=r(5897),i=r(1647),c=r(3998),l=r(2240),o=r(4294);let d=(0,o.A)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);var u=r(6654),m=r(8260);function h(e){let{question:t,onVote:r}=e,a=(0,m.m)(new Date(t.date),{addSuffix:!0});return(0,s.jsxs)("div",{className:"bg-card p-4 rounded-lg shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3 mb-4",children:[(0,s.jsxs)(n.Avatar,{className:"h-10 w-10",children:[(0,s.jsx)(n.AvatarImage,{src:t.avatarUrl,alt:t.author}),(0,s.jsx)(n.AvatarFallback,{children:t.author.charAt(0)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-sm",children:t.author}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:a})]})]}),(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:t.title}),(0,s.jsx)("p",{className:"text-foreground/90 mb-6",children:t.content}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mb-6",children:t.tags.map(e=>(0,s.jsx)(i.E,{variant:"secondary",className:"font-normal",children:e},e))}),(0,s.jsxs)("div",{className:"flex justify-between items-center text-muted-foreground",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(c.$,{variant:"ghost",size:"sm",className:"flex items-center gap-1",onClick:()=>r("up"),children:[(0,s.jsx)(l.A,{className:"h-5 w-5 text-primary"}),(0,s.jsx)("span",{children:t.votes})]}),(0,s.jsx)(c.$,{variant:"ghost",size:"sm",onClick:()=>r("down"),children:(0,s.jsx)(d,{className:"h-5 w-5"})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)(u.A,{className:"h-4 w-4"}),(0,s.jsxs)("span",{children:[t.views," Views"]})]})]})]})}let x=(0,o.A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var f=r(6948),p=r(7468);function v(e){let{answer:t,onVote:r,onAccept:a,isQuestionAuthor:o}=e,u=(0,m.m)(new Date(t.date),{addSuffix:!0}),h=p.oD.find(e=>"user-avatar"===e.id);return(0,s.jsxs)(f.Zp,{className:"bg-card",children:[(0,s.jsxs)(f.aR,{className:"p-4 flex flex-row items-start gap-3",children:[(0,s.jsxs)(n.Avatar,{className:"h-10 w-10",children:[t.avatarUrl?(0,s.jsx)(n.AvatarImage,{src:t.avatarUrl,alt:t.author}):h?(0,s.jsx)(n.AvatarImage,{src:h.imageUrl,alt:"User avatar"}):(0,s.jsx)(n.AvatarFallback,{children:t.author.charAt(0)}),(0,s.jsx)(n.AvatarFallback,{children:t.author.charAt(0)})]}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-sm",children:t.author}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:u})]}),o&&(t.isAccepted?(0,s.jsxs)(i.E,{variant:"default",className:"bg-green-600 hover:bg-green-700",children:[(0,s.jsx)(x,{className:"h-4 w-4 mr-1"}),"Accepted"]}):(0,s.jsx)(c.$,{variant:"outline",size:"sm",onClick:a,children:"Accept Answer"}))]})})]}),(0,s.jsx)(f.Wu,{className:"p-4 pt-0",children:(0,s.jsx)("p",{className:"text-foreground/90",children:t.content})}),(0,s.jsx)(f.wL,{className:"p-4 pt-0 flex justify-start items-center",children:(0,s.jsxs)("div",{className:"flex items-center gap-1 text-muted-foreground",children:[(0,s.jsx)(c.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>r("up"),children:(0,s.jsx)(l.A,{className:"h-5 w-5"})}),(0,s.jsx)("span",{className:"font-semibold",children:t.votes}),(0,s.jsx)(c.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>r("down"),children:(0,s.jsx)(d,{className:"h-5 w-5"})})]})})]})}var g=r(1120),j=r(2033);function w(e){let{onSubmit:t}=e,[r,n]=(0,a.useState)(""),[i,l]=(0,a.useTransition)();return(0,s.jsxs)(f.Zp,{children:[(0,s.jsx)(f.aR,{children:(0,s.jsx)(f.ZB,{children:"Post Your Answer"})}),(0,s.jsx)(f.Wu,{children:(0,s.jsx)("form",{onSubmit:e=>{e.preventDefault(),r.trim()&&l(async()=>{await t(r),n("")})},children:(0,s.jsxs)("div",{className:"grid w-full gap-2",children:[(0,s.jsx)(g.T,{placeholder:"Share your insights and help others...",rows:4,value:r,onChange:e=>n(e.target.value),required:!0,disabled:i}),(0,s.jsxs)(c.$,{type:"submit",disabled:i||!r.trim(),children:[i&&(0,s.jsx)(j.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Submit Answer"]})]})})})]})}var b=r(5894),y=r(4368),N=r(4269),A=r(63);let k=(0,r(3101).F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),R=a.forwardRef((e,t)=>{let{className:r,variant:a,...n}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:(0,N.cn)(k({variant:a}),r),...n})});R.displayName="Alert";let C=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h5",{ref:t,className:(0,N.cn)("mb-1 font-medium leading-none tracking-tight",r),...a})});C.displayName="AlertTitle";let S=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,N.cn)("text-sm [&_p]:leading-relaxed",r),...a})});S.displayName="AlertDescription";let E=(0,o.A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var P=r(4697);function q(e){let{question:t,initialAnswers:r,questionId:n}=e,[i,c]=(0,a.useState)(t),[l,o]=(0,a.useState)(r),{toast:d}=(0,b.useToast)(),u=(0,A.useRouter)(),m=(0,N.HW)(),{socket:x,connected:p}=(0,P.F)(),g=m&&m.username===t.author;(0,a.useEffect)(()=>{if(!x)return;let e=e=>{j()},t=e=>{(e.entityId===n||"ANSWER_CREATED"===e.type)&&j()};return x.on("notification",t),x.on("answerCreated",e),()=>{x.off("notification",t),x.off("answerCreated",e)}},[x,n]);let j=async()=>{try{let e=await (0,y.zi)(n);c(e.question),o(e.answers)}catch(e){console.error("Failed to refresh question data:",e)}},k=async e=>{if(!(0,N.wR)()){d({title:"Authentication Required",description:"You must be logged in to submit an answer.",variant:"destructive"}),u.push("/");return}try{await (0,y.Yi)(n,e),d({title:"Answer Submitted!",description:"Your answer has been posted successfully."}),await j()}catch(e){console.error("Failed to submit answer:",e),d({title:"Error",description:"Could not submit your answer.",variant:"destructive"})}},q=async(e,t,r)=>{if(!(0,N.wR)()){d({title:"Authentication Required",description:"You must be logged in to vote.",variant:"destructive"}),u.push("/");return}try{"question"===e?await (0,y.gT)(n,r):await (0,y.YQ)(n,t,r),await j()}catch(e){console.error("Failed to vote:",e),d({title:"Error",description:e.message||"Your vote could not be recorded.",variant:"destructive"})}},F=async e=>{if(!(0,N.wR)()){d({title:"Authentication Required",description:"You must be logged in to accept an answer.",variant:"destructive"}),u.push("/");return}try{await (0,y.dn)(n,e),d({title:"Answer Accepted",description:"You've marked this answer as the solution."}),await j()}catch(e){console.error("Failed to accept answer:",e),d({title:"Error",description:"Could not accept this answer.",variant:"destructive"})}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h,{question:i,onVote:e=>q("question",i.id,e)}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsxs)("h2",{className:"text-xl font-bold mb-4",children:["Answers (",l.length,")"]}),(0,s.jsx)("div",{className:"space-y-4",children:l.map(e=>(0,s.jsx)(v,{answer:e,onVote:t=>q("answer",e.id,t),onAccept:()=>F(e.id),isQuestionAuthor:g||!1},e.id))})]}),(0,s.jsx)("div",{className:"mt-8",children:g?(0,s.jsx)(f.Zp,{className:"p-4",children:(0,s.jsxs)(R,{children:[(0,s.jsx)(E,{className:"h-4 w-4"}),(0,s.jsx)(C,{children:"Cannot Post Answer"}),(0,s.jsx)(S,{children:"As the author of this question, you cannot post an answer to your own question."})]})}):(0,s.jsx)(w,{onSubmit:k})})]})}},6654:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(4294).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6948:(e,t,r)=>{"use strict";r.d(t,{Wu:()=>o,ZB:()=>l,Zp:()=>i,aR:()=>c,wL:()=>d});var s=r(5155),a=r(2115),n=r(4269);let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});i.displayName="Card";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...a})});c.displayName="CardHeader";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});l.displayName="CardTitle",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...a})}).displayName="CardDescription";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...a})});o.displayName="CardContent";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...a})});d.displayName="CardFooter"},7567:(e,t,r)=>{"use strict";r.d(t,{ProtectedRoute:()=>l});var s=r(5155),a=r(2115),n=r(63),i=r(4269),c=r(5894);function l(e){let{children:t}=e,r=(0,n.useRouter)(),[l,o]=(0,a.useState)(!0),[d,u]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{(0,i.wR)()?(u(!0),o(!1)):((0,c.toast)({title:"Authentication Required",description:"Please log in to access this page.",variant:"destructive"}),r.push("/"))},[r]),l)?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-background",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):d?(0,s.jsx)(s.Fragment,{children:t}):null}}},e=>{e.O(0,[295,667,653,125,109,764,441,493,358],()=>e(e.s=804)),_N_E=e.O()}]);